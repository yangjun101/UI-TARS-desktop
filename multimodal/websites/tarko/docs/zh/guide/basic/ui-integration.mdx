---
title: UI é›†æˆ
description: ä¸º Tarko Agent æ„å»º Web ç•Œé¢
---

# UI é›†æˆ

**Tarko** æä¾›çµæ´»çš„ UI é›†æˆé€‰é¡¹ï¼Œå¸®åŠ©ä½ ä½¿ç”¨ç°ä»£ Web æŠ€æœ¯ä¸º Agent æ„å»ºç”¨æˆ·ç•Œé¢ã€‚

## é›†æˆé€‰é¡¹

### 1. **Tarko Agent UI**ï¼ˆæ¨èï¼‰

å®˜æ–¹ Web UI å®ç°ï¼Œå¯ä¸ä»»ä½• **Tarko Agent** å¼€ç®±å³ç”¨ï¼š

```bash
npm install @tarko/agent-ui
```

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- å®æ—¶ Agent é€šä¿¡
- å†…ç½®èŠå¤©ç•Œé¢
- å·¥å…·æ‰§è¡Œå¯è§†åŒ–
- äº‹ä»¶æµç›‘æ§
- å“åº”å¼è®¾è®¡

### 2. **è‡ªå®šä¹‰ Web UI**

ä½¿ç”¨ **Agent Protocol** æ„å»ºè‡ªå·±çš„ Web ç•Œé¢ï¼š

```typescript
import { AgentClient } from '@tarko/agent-client';

const client = new AgentClient({
  endpoint: 'http://localhost:3000',
});

// å‘ Agent å‘é€æ¶ˆæ¯
const response = await client.sendMessage('ä½ å¥½ï¼ŒAgentï¼');
```

### 3. **åŸç”Ÿåº”ç”¨**

ä½¿ç”¨ HTTP/WebSocket API ä¸æ¡Œé¢æˆ–ç§»åŠ¨åº”ç”¨é›†æˆã€‚

## æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ UI       â”‚â—„â”€â”€â–ºâ”‚  Tarko Agent     â”‚â—„â”€â”€â–ºâ”‚  LLM Provider   â”‚
â”‚                 â”‚    â”‚  Server          â”‚    â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ èŠå¤©ç•Œé¢      â”‚    â”‚ â€¢ Agent Protocol â”‚    â”‚ â€¢ OpenAI        â”‚
â”‚ â€¢ å·¥å…·è¾“å‡º      â”‚    â”‚ â€¢ Event Stream   â”‚    â”‚ â€¢ Anthropic     â”‚
â”‚ â€¢ å®æ—¶æ›´æ–°      â”‚    â”‚ â€¢ å·¥å…·æ‰§è¡Œ       â”‚    â”‚ â€¢ Volcengine    â”‚
â”‚                 â”‚    â”‚ â€¢ ä¸Šä¸‹æ–‡ç®¡ç†     â”‚    â”‚ â€¢ å…¶ä»–          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨ Tarko Agent UI å¿«é€Ÿå¼€å§‹

ä¸ºä½ çš„ Agent è·å– Web UI çš„æœ€å¿«æ–¹å¼ï¼š

### 1. å®‰è£…ä¾èµ–

```bash
npm install @tarko/agent-ui
```

### 2. åŸºæœ¬è®¾ç½®

```typescript
import { AgentUI } from '@tarko/agent-ui';
import '@tarko/agent-ui/styles.css';

function App() {
  return (
    <AgentUI
      endpoint="http://localhost:3000"
      title="æˆ‘çš„ Agent"
      theme="light"
    />
  );
}

export default App;
```

### 3. å¯åŠ¨ Agent æœåŠ¡å™¨

```bash
tarko run --server
```

ä½ çš„ Web UI å°†è‡ªåŠ¨è¿æ¥åˆ° Agentï¼

## é€šä¿¡åè®®

### HTTP API

ç”¨äºåŸºæœ¬ Agent äº¤äº’çš„ RESTful APIï¼š

```typescript
// å‘é€æ¶ˆæ¯
POST /api/chat
{
  "message": "ä½ å¥½ï¼ŒAgentï¼",
  "sessionId": "session-123"
}

// è·å–ä¼šè¯å†å²
GET /api/sessions/session-123/messages
```

### WebSocket

å®æ—¶åŒå‘é€šä¿¡ï¼š

```typescript
const ws = new WebSocket('ws://localhost:3000/ws');

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('Agent äº‹ä»¶:', data);
};
```

### Server-Sent Events (SSE)

ç”¨äºå®æ—¶æ›´æ–°çš„æµå¼å“åº”ï¼š

```typescript
const eventSource = new EventSource('/api/stream/session-123');

eventSource.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('æµæ›´æ–°:', data);
};
```

## Event Stream

**Tarko** ä½¿ç”¨æ ‡å‡†åŒ–çš„äº‹ä»¶æµæ ¼å¼è¿›è¡Œå®æ—¶é€šä¿¡ï¼š

```typescript
interface AgentEvent {
  type: 'message' | 'tool_call' | 'tool_result' | 'thinking' | 'error';
  timestamp: string;
  sessionId: string;
  data: any;
}
```

### äº‹ä»¶ç±»å‹

| äº‹ä»¶ç±»å‹ | æè¿° | æ•°æ® |
|----------|------|------|
| `message` | Agent å“åº”æ¶ˆæ¯ | `{ content: string, role: 'assistant' }` |
| `tool_call` | å·¥å…·æ‰§è¡Œå¼€å§‹ | `{ name: string, args: object }` |
| `tool_result` | å·¥å…·æ‰§è¡Œå®Œæˆ | `{ result: any, success: boolean }` |
| `thinking` | Agent æ¨ç†è¿‡ç¨‹ | `{ content: string }` |
| `error` | å‘ç”Ÿé”™è¯¯ | `{ message: string, code?: string }` |

## è‡ªå®šä¹‰ Web UI å¼€å‘

### React é›†æˆ

æ„å»ºè‡ªå®šä¹‰ React ç•Œé¢ï¼š

```typescript
import React, { useState, useEffect } from 'react';
import { AgentClient } from '@tarko/agent-client';

const CustomAgentUI = () => {
  const [client] = useState(() => new AgentClient({
    endpoint: 'http://localhost:3000'
  }));
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState('');
  const [loading, setLoading] = useState(false);

  const sendMessage = async () => {
    if (!input.trim()) return;
    
    setLoading(true);
    const userMessage = { role: 'user', content: input };
    setMessages(prev => [...prev, userMessage]);
    setInput('');

    try {
      const response = await client.sendMessage(input);
      const assistantMessage = { role: 'assistant', content: response.content };
      setMessages(prev => [...prev, assistantMessage]);
    } catch (error) {
      console.error('å‘é€æ¶ˆæ¯æ—¶å‡ºé”™:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="agent-ui">
      <div className="messages">
        {messages.map((msg, idx) => (
          <div key={idx} className={`message ${msg.role}`}>
            {msg.content}
          </div>
        ))}
      </div>
      <div className="input-area">
        <input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
          placeholder="è¾“å…¥ä½ çš„æ¶ˆæ¯..."
          disabled={loading}
        />
        <button onClick={sendMessage} disabled={loading}>
          {loading ? 'å‘é€ä¸­...' : 'å‘é€'}
        </button>
      </div>
    </div>
  );
};
```

### Vue.js é›†æˆ

```vue
<template>
  <div class="agent-ui">
    <div class="messages">
      <div
        v-for="(message, index) in messages"
        :key="index"
        :class="`message ${message.role}`"
      >
        {{ message.content }}
      </div>
    </div>
    <div class="input-area">
      <input
        v-model="input"
        @keyup.enter="sendMessage"
        placeholder="è¾“å…¥ä½ çš„æ¶ˆæ¯..."
        :disabled="loading"
      />
      <button @click="sendMessage" :disabled="loading">
        {{ loading ? 'å‘é€ä¸­...' : 'å‘é€' }}
      </button>
    </div>
  </div>
</template>

<script>
import { AgentClient } from '@tarko/agent-client';

export default {
  data() {
    return {
      client: new AgentClient({ endpoint: 'http://localhost:3000' }),
      messages: [],
      input: '',
      loading: false
    };
  },
  methods: {
    async sendMessage() {
      if (!this.input.trim()) return;
      
      this.loading = true;
      this.messages.push({ role: 'user', content: this.input });
      const message = this.input;
      this.input = '';

      try {
        const response = await this.client.sendMessage(message);
        this.messages.push({ role: 'assistant', content: response.content });
      } catch (error) {
        console.error('é”™è¯¯:', error);
      } finally {
        this.loading = false;
      }
    }
  }
};
</script>
```

## å®æ—¶åŠŸèƒ½

### WebSocket è¿æ¥

å®ç°å®æ—¶é€šä¿¡ï¼š

```typescript
class AgentWebSocket {
  private ws: WebSocket;
  private eventHandlers: Map<string, Function[]> = new Map();

  constructor(endpoint: string) {
    this.ws = new WebSocket(endpoint.replace('http', 'ws') + '/ws');
    this.setupEventHandlers();
  }

  private setupEventHandlers() {
    this.ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      const handlers = this.eventHandlers.get(data.type) || [];
      handlers.forEach(handler => handler(data));
    };

    this.ws.onopen = () => {
      console.log('WebSocket å·²è¿æ¥');
    };

    this.ws.onclose = () => {
      console.log('WebSocket å·²æ–­å¼€');
      // å®ç°é‡è¿é€»è¾‘
    };
  }

  on(eventType: string, handler: Function) {
    if (!this.eventHandlers.has(eventType)) {
      this.eventHandlers.set(eventType, []);
    }
    this.eventHandlers.get(eventType)!.push(handler);
  }

  sendMessage(message: string) {
    this.ws.send(JSON.stringify({ type: 'message', content: message }));
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const agentWS = new AgentWebSocket('http://localhost:3000');

agentWS.on('message', (data) => {
  console.log('æ”¶åˆ°æ¶ˆæ¯:', data.content);
});

agentWS.on('tool_call', (data) => {
  console.log('å·¥å…·è°ƒç”¨:', data.name, data.args);
});

agentWS.on('tool_result', (data) => {
  console.log('å·¥å…·ç»“æœ:', data.result);
});
```

### Server-Sent Events

ä½¿ç”¨ SSE çš„æ›¿ä»£æ–¹æ³•ï¼š

```typescript
class AgentEventSource {
  private eventSource: EventSource;
  private sessionId: string;

  constructor(endpoint: string, sessionId: string) {
    this.sessionId = sessionId;
    this.eventSource = new EventSource(`${endpoint}/api/stream/${sessionId}`);
    this.setupEventHandlers();
  }

  private setupEventHandlers() {
    this.eventSource.onmessage = (event) => {
      const data = JSON.parse(event.data);
      this.handleEvent(data);
    };

    this.eventSource.onerror = (error) => {
      console.error('SSE é”™è¯¯:', error);
    };
  }

  private handleEvent(data: any) {
    switch (data.type) {
      case 'message':
        this.onMessage(data);
        break;
      case 'tool_call':
        this.onToolCall(data);
        break;
      case 'tool_result':
        this.onToolResult(data);
        break;
    }
  }

  onMessage(data: any) {
    // åœ¨å­ç±»ä¸­é‡å†™æˆ–ä¼ é€’å›è°ƒ
  }

  onToolCall(data: any) {
    // åœ¨å­ç±»ä¸­é‡å†™æˆ–ä¼ é€’å›è°ƒ
  }

  onToolResult(data: any) {
    // åœ¨å­ç±»ä¸­é‡å†™æˆ–ä¼ é€’å›è°ƒ
  }

  close() {
    this.eventSource.close();
  }
}
```

## UI ç»„ä»¶

### èŠå¤©ç•Œé¢

åŸºæœ¬èŠå¤©ç»„ä»¶ç»“æ„ï¼š

```typescript
interface ChatMessage {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
  toolCalls?: ToolCall[];
}

interface ToolCall {
  id: string;
  name: string;
  args: object;
  result?: any;
  status: 'pending' | 'success' | 'error';
}
```

### å·¥å…·æ‰§è¡Œå¯è§†åŒ–

```typescript
import React from 'react';

interface ToolExecutionProps {
  toolCall: {
    name: string;
    args: object;
    result?: any;
    status: 'pending' | 'success' | 'error';
    startTime: Date;
    endTime?: Date;
  };
}

const ToolExecution: React.FC<ToolExecutionProps> = ({ toolCall }) => {
  const duration = toolCall.endTime 
    ? toolCall.endTime.getTime() - toolCall.startTime.getTime()
    : null;

  return (
    <div className={`tool-execution ${toolCall.status}`}>
      <div className="tool-header">
        <span className="tool-name">{toolCall.name}</span>
        <span className="tool-status">{toolCall.status}</span>
        {duration && (
          <span className="tool-duration">{duration}ms</span>
        )}
      </div>
      
      <details className="tool-args">
        <summary>å‚æ•°</summary>
        <pre>{JSON.stringify(toolCall.args, null, 2)}</pre>
      </details>
      
      {toolCall.result && (
        <details className="tool-result">
          <summary>ç»“æœ</summary>
          <pre>{JSON.stringify(toolCall.result, null, 2)}</pre>
        </details>
      )}
    </div>
  );
};
```

### æ€è€ƒè¿‡ç¨‹æ˜¾ç¤º

```typescript
const ThinkingProcess: React.FC<{ thoughts: string[] }> = ({ thoughts }) => {
  return (
    <div className="thinking-process">
      <div className="thinking-header">
        <span>ğŸ¤” Agent æ­£åœ¨æ€è€ƒ...</span>
      </div>
      <div className="thoughts">
        {thoughts.map((thought, idx) => (
          <div key={idx} className="thought">
            {thought}
          </div>
        ))}
      </div>
    </div>
  );
};
```

## æ ·å¼å’Œä¸»é¢˜

### CSS å˜é‡

```css
:root {
  --agent-primary: #007bff;
  --agent-secondary: #6c757d;
  --agent-success: #28a745;
  --agent-danger: #dc3545;
  --agent-warning: #ffc107;
  --agent-info: #17a2b8;
  
  --agent-bg: #ffffff;
  --agent-text: #333333;
  --agent-border: #e9ecef;
  
  --agent-message-user-bg: #007bff;
  --agent-message-user-text: #ffffff;
  --agent-message-assistant-bg: #f8f9fa;
  --agent-message-assistant-text: #333333;
}

[data-theme="dark"] {
  --agent-bg: #1a1a1a;
  --agent-text: #ffffff;
  --agent-border: #333333;
  
  --agent-message-assistant-bg: #2d2d2d;
  --agent-message-assistant-text: #ffffff;
}
```

### ç»„ä»¶æ ·å¼

```css
.agent-ui {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background: var(--agent-bg);
  color: var(--agent-text);
}

.messages {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
}

.message {
  margin-bottom: 1rem;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  max-width: 80%;
}

.message.user {
  background: var(--agent-message-user-bg);
  color: var(--agent-message-user-text);
  margin-left: auto;
}

.message.assistant {
  background: var(--agent-message-assistant-bg);
  color: var(--agent-message-assistant-text);
}

.input-area {
  display: flex;
  padding: 1rem;
  border-top: 1px solid var(--agent-border);
}

.input-area input {
  flex: 1;
  padding: 0.75rem;
  border: 1px solid var(--agent-border);
  border-radius: 0.25rem;
  margin-right: 0.5rem;
}

.input-area button {
  padding: 0.75rem 1.5rem;
  background: var(--agent-primary);
  color: white;
  border: none;
  border-radius: 0.25rem;
  cursor: pointer;
}

.input-area button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
```

## è®¤è¯ä¸å®‰å…¨

### API å¯†é’¥

å®‰å…¨çš„ API å¯†é’¥è®¤è¯ï¼š

```typescript
const client = new AgentClient({
  endpoint: 'http://localhost:3000',
  apiKey: process.env.TARKO_API_KEY,
});
```

### ä¼šè¯ç®¡ç†

ç®¡ç†ç”¨æˆ·ä¼šè¯å’Œä¸Šä¸‹æ–‡ï¼š

```typescript
interface Session {
  id: string;
  userId?: string;
  createdAt: Date;
  lastActivity: Date;
  context: AgentContext;
}
```

## éƒ¨ç½²è€ƒè™‘

### CORS é…ç½®

å¯¹äº Web UIï¼Œåœ¨ Agent æœåŠ¡å™¨ä¸­é…ç½® CORSï¼š

```typescript
export default defineConfig({
  server: {
    cors: {
      origin: ['http://localhost:3000', 'https://myapp.com'],
      credentials: true,
    },
  },
});
```

### åå‘ä»£ç†

åœ¨ç”Ÿäº§éƒ¨ç½²ä¸­ä½¿ç”¨åå‘ä»£ç†ï¼š

```nginx
location /api/ {
    proxy_pass http://localhost:3001/;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
}
```

### ç¯å¢ƒé…ç½®

```typescript
// config.ts
export const config = {
  apiEndpoint: process.env.REACT_APP_API_ENDPOINT || 'http://localhost:3000',
  wsEndpoint: process.env.REACT_APP_WS_ENDPOINT || 'ws://localhost:3000',
  apiKey: process.env.REACT_APP_API_KEY,
};
```

### æ„å»ºå’Œéƒ¨ç½²

```bash
# ç”Ÿäº§æ„å»º
npm run build

# éƒ¨ç½²åˆ°é™æ€æ‰˜ç®¡
# (Vercel, Netlify, AWS S3 ç­‰)
```

### Docker éƒ¨ç½²

```dockerfile
# Dockerfile
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=0 /app/build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

## ä¸‹ä¸€æ­¥

- [Agent Protocol â†’](/guide/advanced/agent-protocol)
- [Event Stream â†’](/guide/basic/event-stream)
- [é…ç½® â†’](/guide/basic/configuration)
